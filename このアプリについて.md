## アプリURL

https://fp-matching-shichida.herokuapp.com

## アプリの設計について
XDを使用して画面作成、そのあとからER図の作成を行いました。

UIからデータ項目など仕様が決められていくと考えているので、UIからまず作成しました。

そしてER図を作成し必要なデータテーブルを洗い出し、開発途中でマイグレーションファイルの追加や削除することを極力減らしました。

タスク管理では、githubのissueを使いタスクの粒度を小さくして確実に進められるようにしました。

### UI図
<img width="500" alt="スクリーンショット 2020-11-01 15 21 48" src="https://user-images.githubusercontent.com/42334697/97796540-7aec3e00-1c56-11eb-838a-95aa285b5d3b.png">
<img width="500" alt="スクリーンショット 2020-11-01 15 22 06" src="https://user-images.githubusercontent.com/42334697/97796541-7d4e9800-1c56-11eb-80c7-766a88ae7ac0.png">
<img width="500" alt="スクリーンショット 2020-11-01 15 22 20" src="https://user-images.githubusercontent.com/42334697/97796543-7e7fc500-1c56-11eb-809e-9920b2ecf14c.png">
<img width="500" alt="スクリーンショット 2020-11-01 15 22 25" src="https://user-images.githubusercontent.com/42334697/97796544-7fb0f200-1c56-11eb-842c-5a44d1f7434b.png">

### ER図
<img width="500" alt="スクリーンショット 2020-11-01 15 19 22" src="https://user-images.githubusercontent.com/42334697/97796472-ceaa5780-1c55-11eb-8c56-578fda6ffc8a.png">

## 作成したアプリケーションのアピールポイント、工夫した点
主な機能は以下の通りです。

- Rubocopを使用したLint
- Rspecを使用した一部テスト
- circleciを使用したCI環境の導入
- Ransackを使用した検索機能
- react-railsを使用し、Reactでモーダルを導入
- simple_calendarを使用したカレンダーの作成
- cocoonを使用して子モデルを同時保存できるようにした

### カレンダーを使って予約できるようにし、予約状況を閲覧できるようにしました
simple_calendarを使用して、UIにカレンダーを追加しました。
一日あたりの予約数に応じて○・△・xで表現しています。(１日の予約している数が半数以下であれば○, 半数以上であれば△, 全て埋まっている場合・休日・予約を受け付けていない場合はxで表示しています。)
予約をするときにもこのカレンダーを使用して日付を選択し、その予約したい日付についてajaxでデータを送り、予約可能な枠を選択できるようにしています。

<img width="500" alt="スクリーンショット 2020-11-01 16 28 03" src="https://user-images.githubusercontent.com/42334697/97797297-3913c580-1c5f-11eb-8349-40eb77ef13bd.png">
<img width="500" alt="スクリーンショット 2020-11-01 16 18 44" src="https://user-images.githubusercontent.com/42334697/97797137-ec7bba80-1c5d-11eb-9bd4-853bc9c78cd2.png">

### 予約まわりのバリデーションに注意しました
現実だと予約が重複している・予約ができない時間だったなどトラブルに繋がる元となるので予約の周りのバリデーションは特に注意しました。

- 30分刻みでしか予約できない
- 曜日ごとの予約枠の制限(app/validator以下に記述)
- すでに本人が予約しているときは予約できない
- 予約が他の人とバッティングしているときは予約できない
- FP側が予約を受け付けていない日付を予約しようとしているときは予約できない
- 過去の日付に予約しようとしているときは予約できない

など
現実だと予約が重複している・予約ができない時間だったなどトラブルに繋がる元となるので問題に直面しないよう
